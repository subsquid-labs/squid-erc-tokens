module.exports = class Data1693321979465 {
    name = 'Data1693321979465'

    async up(db) {
        await db.query(`CREATE TABLE "transfer" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "txn_hash" text, "amount" numeric NOT NULL, "contract_id" character varying, "token_id" character varying, "from_id" character varying, "to_id" character varying, CONSTRAINT "PK_fd9ddbdd49a17afcbe014401295" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_8b5f51515a63064d5d10f9f0f3" ON "transfer" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_b27b1150b8a7af68424540613c" ON "transfer" ("token_id") `)
        await db.query(`CREATE INDEX "IDX_76bdfed1a7eb27c6d8ecbb7349" ON "transfer" ("from_id") `)
        await db.query(`CREATE INDEX "IDX_0751309c66e97eac9ef1149362" ON "transfer" ("to_id") `)
        await db.query(`CREATE TABLE "contract" ("id" character varying NOT NULL, "address" text NOT NULL, "total_supply" numeric NOT NULL, "interfaces" character varying(7) array NOT NULL, CONSTRAINT "PK_17c3a89f58a2997276084e706e8" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "mint" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "txn_hash" text, "amount" numeric NOT NULL, "contract_id" character varying, "token_id" character varying, CONSTRAINT "PK_fcaea791104aa41aa11dac29cb2" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_9c5f168f40b11cc9a7b3f30457" ON "mint" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_dcf86c31cbc4c1a7683c93fd5a" ON "mint" ("token_id") `)
        await db.query(`CREATE TABLE "burn" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "txn_hash" text, "amount" numeric NOT NULL, "contract_id" character varying, "token_id" character varying, CONSTRAINT "PK_dcb4f14ee4534154b31116553f0" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_fb522e0334d631f0ca0104332f" ON "burn" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_d3dc8bdeb4464615048a2ac7c6" ON "burn" ("token_id") `)
        await db.query(`CREATE TABLE "token" ("id" character varying NOT NULL, "type" character varying(7) NOT NULL, "index" numeric, "supply" numeric NOT NULL, "contract_id" character varying, CONSTRAINT "PK_82fae97f905930df5d62a702fc9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_5c85dbbd108d915a13f71de39a" ON "token" ("contract_id") `)
        await db.query(`CREATE TABLE "token_balance" ("id" character varying NOT NULL, "value" numeric NOT NULL, "account_id" character varying, "token_id" character varying, CONSTRAINT "PK_dc23ea262a0188977523d90ae7f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_d4e04cd8874942b186b7a9d927" ON "token_balance" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_5813c3040e74c285719679c693" ON "token_balance" ("token_id") `)
        await db.query(`CREATE TABLE "account" ("id" character varying NOT NULL, "address" text NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`)
        await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_8b5f51515a63064d5d10f9f0f30" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_b27b1150b8a7af68424540613c7" FOREIGN KEY ("token_id") REFERENCES "token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_76bdfed1a7eb27c6d8ecbb73496" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_0751309c66e97eac9ef11493623" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "mint" ADD CONSTRAINT "FK_9c5f168f40b11cc9a7b3f304572" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "mint" ADD CONSTRAINT "FK_dcf86c31cbc4c1a7683c93fd5ac" FOREIGN KEY ("token_id") REFERENCES "token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "burn" ADD CONSTRAINT "FK_fb522e0334d631f0ca0104332f2" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "burn" ADD CONSTRAINT "FK_d3dc8bdeb4464615048a2ac7c63" FOREIGN KEY ("token_id") REFERENCES "token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "token" ADD CONSTRAINT "FK_5c85dbbd108d915a13f71de39ad" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "token_balance" ADD CONSTRAINT "FK_d4e04cd8874942b186b7a9d927d" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "token_balance" ADD CONSTRAINT "FK_5813c3040e74c285719679c6935" FOREIGN KEY ("token_id") REFERENCES "token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "transfer"`)
        await db.query(`DROP INDEX "public"."IDX_8b5f51515a63064d5d10f9f0f3"`)
        await db.query(`DROP INDEX "public"."IDX_b27b1150b8a7af68424540613c"`)
        await db.query(`DROP INDEX "public"."IDX_76bdfed1a7eb27c6d8ecbb7349"`)
        await db.query(`DROP INDEX "public"."IDX_0751309c66e97eac9ef1149362"`)
        await db.query(`DROP TABLE "contract"`)
        await db.query(`DROP TABLE "mint"`)
        await db.query(`DROP INDEX "public"."IDX_9c5f168f40b11cc9a7b3f30457"`)
        await db.query(`DROP INDEX "public"."IDX_dcf86c31cbc4c1a7683c93fd5a"`)
        await db.query(`DROP TABLE "burn"`)
        await db.query(`DROP INDEX "public"."IDX_fb522e0334d631f0ca0104332f"`)
        await db.query(`DROP INDEX "public"."IDX_d3dc8bdeb4464615048a2ac7c6"`)
        await db.query(`DROP TABLE "token"`)
        await db.query(`DROP INDEX "public"."IDX_5c85dbbd108d915a13f71de39a"`)
        await db.query(`DROP TABLE "token_balance"`)
        await db.query(`DROP INDEX "public"."IDX_d4e04cd8874942b186b7a9d927"`)
        await db.query(`DROP INDEX "public"."IDX_5813c3040e74c285719679c693"`)
        await db.query(`DROP TABLE "account"`)
        await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_8b5f51515a63064d5d10f9f0f30"`)
        await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_b27b1150b8a7af68424540613c7"`)
        await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_76bdfed1a7eb27c6d8ecbb73496"`)
        await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_0751309c66e97eac9ef11493623"`)
        await db.query(`ALTER TABLE "mint" DROP CONSTRAINT "FK_9c5f168f40b11cc9a7b3f304572"`)
        await db.query(`ALTER TABLE "mint" DROP CONSTRAINT "FK_dcf86c31cbc4c1a7683c93fd5ac"`)
        await db.query(`ALTER TABLE "burn" DROP CONSTRAINT "FK_fb522e0334d631f0ca0104332f2"`)
        await db.query(`ALTER TABLE "burn" DROP CONSTRAINT "FK_d3dc8bdeb4464615048a2ac7c63"`)
        await db.query(`ALTER TABLE "token" DROP CONSTRAINT "FK_5c85dbbd108d915a13f71de39ad"`)
        await db.query(`ALTER TABLE "token_balance" DROP CONSTRAINT "FK_d4e04cd8874942b186b7a9d927d"`)
        await db.query(`ALTER TABLE "token_balance" DROP CONSTRAINT "FK_5813c3040e74c285719679c6935"`)
    }
}
